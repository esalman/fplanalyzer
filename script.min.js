var fplAnalyzer={initialized:false,teamArr:{Fulham:"FUL",Arsenal:"ARS",Everton:"EVE","West Brom":"WBA","Hull City":"HUL",Norwich:"NOR",Newcastle:"NEW","West Ham":"WHM",Southampton:"SOU",Sunderland:"SUN","Stoke City":"STK","Crystal Palace":"CPA","Aston Villa":"AVL",Liverpool:"LIV","Cardiff City":"CAR","Man City":"MCY",Tottenham:"TOT",Swansea:"SWA","Man Utd":"MUN",Chelsea:"CHE"},fixArr:{},fisoArr:{},options:{domain:"http://pure-ocean-7640.herokuapp.com/"},init:function(){fplAnalyzer.initialized=true;$("body").append(fplAnalyzer.loader)},update:function(){fplAnalyzer.loader.show();fplAnalyzer.loadFisoData()},loadFixture:function(){fplAnalyzer.fixArr={};$.each($(".ismFixtureTable tbody tr"),function(e,t){fh=fplAnalyzer.fixArr[$(t).children(".ismHomeTeam").html()];fa=fplAnalyzer.fixArr[$(t).children(".ismAwayTeam").html()];th=fplAnalyzer.teamArr[$(t).children(".ismHomeTeam").html()];ta=fplAnalyzer.teamArr[$(t).children(".ismAwayTeam").html()];fplAnalyzer.fixArr[$(t).children(".ismHomeTeam").html()]=(fh==undefined?"":fh+",")+ta.toUpperCase();fplAnalyzer.fixArr[$(t).children(".ismAwayTeam").html()]=(fa==undefined?"":fa+",")+th.toLowerCase()})},updateOpponent:function(){$.each($("#ismTeamDisplayGraphical div[id^=ismGraphical]"),function(e,t){$(t).find(".ismElementDetail dd").css("background-color","#126E37");var n=fplAnalyzer.fisoArr[fplAnalyzer.parseismGraphicalClass(t)];var r=fplAnalyzer.fixArr[$(t).find(".ismShirt").attr("title")]==undefined?"":fplAnalyzer.fixArr[$(t).find(".ismShirt").attr("title")];r+=' <span style="color: #CCC">'+n+"%</span>";$(t).find(".ismElementDetail dd").html(r)});fplAnalyzer.loader.hide()},loadFisoData:function(){var e=[];$.each($("div[id^=ismGraphical]"),function(t,n){var r=fplAnalyzer.parseismGraphicalClass(n);if(fplAnalyzer.fisoArr[r]==undefined)e.push(r)});if(e.length<1){fplAnalyzer.loadFixture();fplAnalyzer.updateOpponent();return}$.getJSON(fplAnalyzer.options.domain+"fisoparse.php",{id:e.join(",")}).done(function(e){$.extend(fplAnalyzer.fisoArr,e);fplAnalyzer.loadFixture();fplAnalyzer.updateOpponent()})},parseismGraphicalClass:function(e){return $(e).find("a.ismViewProfile").attr("href").replace("#","")},loader:$('<span style="background: #F00; color: #FFF; position: fixed; top: 0px; left: 0px; padding: 3px 3px; display: none;">Loading...</span>')};var fplAnalyzeTrigger=function(){if(!fplAnalyzer.initialized)fplAnalyzer.init();fplAnalyzer.update()}
